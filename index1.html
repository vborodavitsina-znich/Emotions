<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Карта эмоций — 122 состояния</title>
<style>
:root{
  --bg:#0b1020; --card:#121936; --muted:#8ea0c7; --text:#e7ecf7;
  --joy:#3ddc97; --sad:#7aa2f7; --fear:#f6c177; --anger:#ef596f; --disgust:#74c7a5; --surprise:#f4d35e;
  --chip:#1a2348; --chip-hover:#223062; --pill:#0e1633; --accent:#9bdbff;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:linear-gradient(180deg,#0b1020 0%,#0e1836 100%);
  color:var(--text);
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif
}
header{
  padding:20px 16px 10px;
  position:sticky;
  top:0;
  background:linear-gradient(180deg, rgba(11,16,32,.95), rgba(11,16,32,.70));
  backdrop-filter: blur(6px);
  z-index:10;
  border-bottom:1px solid rgba(255,255,255,.06)
}
h1{margin:0 0 6px;font-size:20px}
.sub{color:var(--muted);font-size:13px;margin-bottom:10px}
.controls{display:grid;gap:8px;grid-template-columns:1fr;max-width:1200px;margin:0 auto}
@media(min-width:700px){.controls{grid-template-columns: 1.2fr .9fr .9fr}}
input,select{
  background:var(--card);
  border:1px solid rgba(255,255,255,.1);
  color:var(--text);
  padding:10px 12px;
  border-radius:10px;
  font-size:14px;
  width:100%
}
.main{max-width:1200px;margin:16px auto;padding:0 16px 32px}
.legend{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:14px}
.legend .item{
  display:flex;align-items:center;gap:8px;
  background:var(--pill);
  padding:8px 10px;border-radius:999px;
  border:1px solid rgba(255,255,255,.06);
  font-size:12px;color:var(--muted)
}
.sw{width:12px;height:12px;border-radius:3px}
.grid{display:grid;gap:14px}
@media(min-width:800px){.grid{grid-template-columns: repeat(2, minmax(0,1fr))}}
@media(min-width:1100px){.grid{grid-template-columns: repeat(3, minmax(0,1fr))}}
.lane{
  background:var(--card);
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  overflow:hidden
}
.lane h2{
  margin:0;padding:12px 14px;font-size:16px;
  display:flex;align-items:center;gap:10px;
  border-bottom:1px solid rgba(255,255,255,.06)
}
.lane h2 .dot{width:10px;height:10px;border-radius:50%}
.levels{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:10px;
  padding:12px
}
.col{
  background:rgba(255,255,255,.02);
  border:1px solid rgba(255,255,255,.05);
["Гнев подавленный","Гнев","Средняя","Эмоция гнева, которую не выражаю открыто.","Что я скрываю?"],

// --- Отвращение ---
["Отвращение","Отвращение","Высокая","Сильное неприятие чего-то или кого-то.","Что мне категорически не подходит?"],
["Брезгливость","Отвращение","Низкая","Физическое неприятие.","Что не соответствует моим ценностям и убеждениям?"],
["Неприязнь","Отвращение","Средняя","Устойчивое негативное отношение.","Что не соответствует моим ценностям и убеждениям?"],
["Презрение","Отвращение","Высокая","Моральное отторжение с ощущением превосходства.","Что я не принимаю в людях? В чем я считаю себя выше?"],
["Надменность","Отвращение","Средняя","Чувство превосходства.","Где я внутренне возвышаюсь над кем-то?"],
["Снисходительность","Отвращение","Низкая","Мягкая форма превосходства.","Кого я не воспринимаю всерьез?"],
["Пренебрежение","Отвращение","Средняя","Игнорирование ценности.","Что я не принимаю в людях? В чем мое преимущество перед другими?"],
["Высокомерие","Отвращение","Высокая","Явное демонстрирование превосходства.","Что я не принимаю в людях? В чем я ищу повод чувствовать себя выше?"],
["Обесценивание","Отвращение","Средняя","Снижение важности другого.","Что я намеренно уменьшаю в значимости?"],
["Цинизм","Отвращение","Средняя","Скептическое отрицание искренности.","Что я считаю наивным?"],
["Отторжение","Отвращение","Высокая","Сильное неприятие чего-то или кого-то.","Что мне категорически не подходит?"],
["Неприятие","Отвращение","Средняя","Не согласен с чем-то внутренне.","Что я не принимаю?"],
["Омерзение","Отвращение","Пиковая","Крайнее чувство физического или морального отвращения.","Что вызывает у меня омерзение?"],
["Скепсис","Отвращение","Средняя","Недоверие, сомнение в искренности.","Что я сомневаюсь?"],
["Ненависть","Отвращение","Высокая","Эмоция сильного отторжения к объекту.","К кому я испытываю ненависть?"],

// --- Удивление ---
["Изумление","Удивление","Высокая","Сильное ощущение неожиданного.","Что меня изумляет?"],
["Шок","Удивление","Пиковая","Резкая неожиданность, дезориентация.","Что меня шокирует?"],
["Восторг","Удивление","Высокая","Положительное удивление.","Что превзошло мои самые смелые ожидания?"],
["Удивление","Удивление","Средняя","Базовая эмоция неожиданности.","Что меня удивляет?"],
["Интерес","Удивление","Средняя","Внимание к новому и необычному.","В поисках какой ценности я нахожусь? Какую ценность я сейчас исследую?"],
["Любопытство","Удивление","Низкая","Желание узнать что-то новое.","В поисках каких открытий я нахожусь?"],
["Озадаченность","Удивление","Средняя","Состояние легкой растерянности и удивления.","Какой вопрос здесь главный для меня?"],
["Ошеломление","Удивление","Пиковая","Крайнее потрясение и удивление.","Что меня ошеломляет?"],
["Восхищение","Удивление","Высокая","Положительное удивление и уважение.","Кого я восхищаюсь?"],
["Замешательство","Удивление","Средняя","Неведение, легкое удивление.","Что меня смущает?"],
["Недоумение","Удивление","Средняя","Непонимание происходящего.","Что именно не оправдало ожиданий?"],
["Открытие","Удивление","Высокая","Удовольствие от нового знания или опыта.","Что я открыл?"]
];

const lanes = [
{ base:"Радость", color:"var(--joy)" },
{ base:"Грусть", color:"var(--sad)" },
{ base:"Страх", color:"var(--fear)" },
{ base:"Гнев", color:"var(--anger)" },
{ base:"Отвращение", color:"var(--disgust)" },
{ base:"Удивление", color:"var(--surprise)" }
];

const levels = ["Низкая","Средняя","Высокая","Пиковая"];

const items = dataRaw.map(([name,base,level,desc,question])=>({name,base,level,desc,question}));

function build(){
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  let shown=0;
  const q=document.getElementById("q").value.trim().toLowerCase();
  const fBase=document.getElementById("f-base").value;
  const fLevel=document.getElementById("f-level").value;

  lanes.forEach(l=>{
    const lane=document.createElement("section");
    lane.className="lane";

    const h2=document.createElement("h2");
    const dot=document.createElement("span");
    dot.className="dot"; dot.style.background=l.color;
    h2.appendChild(dot); h2.appendChild(document.createTextNode(l.base));
    lane.appendChild(h2);

    const wrap=document.createElement("div");
    wrap.className="levels";

    levels.forEach(level=>{
      const col=document.createElement("div"); col.className="col";
      const h3=document.createElement("h3"); h3.textContent=level; col.appendChild(h3);
      const chips=document.createElement("div"); chips.className="chips";

      const filtered = items.filter(it=>{
        if(it.base!==l.base) return false;
        if(it.level!==level) return false;
        if(fBase && it.base!==fBase) return false;
        if(fLevel && it.level!==fLevel) return false;
        if(q && !it.name.toLowerCase().includes(q)) return false;
        return true;
      });

      if(filtered.length===0){
        const empty=document.createElement("div"); empty.className="empty muted"; empty.textContent="—";
        col.appendChild(empty);
      } else {
        filtered.forEach(it=>{
          const chip=document.createElement("button"); chip.className="chip"; chip.textContent=it.name;
          chip.onclick=()=>openDialog(it);
          chips.appendChild(chip); shown++;
        });
        col.appendChild(chips);
      }
      wrap.appendChild(col);
    });

    lane.appendChild(wrap);
    grid.appendChild(lane);
  });

  document.getElementById("total").textContent=items.length;
  document.getElementById("shown").textContent=shown;
}

function openDialog(it){
  document.getElementById("dlg-title").textContent=it.name;
  document.getElementById("dlg-desc").textContent=it.desc;
  document.getElementById("dlg-question").textContent="Вопрос: "+it.question;
  document.getElementById("dlg-tags").innerHTML=
    `<span class="badge">${it.base}</span> <span class="badge">${it.level}</span>`;
  dlg.showModal();
}

document.getElementById("q").addEventListener("input",build);
document.getElementById("f-base").addEventListener("change",build);
document.getElementById("f-level").addEventListener("change",build);

build();
</script>
</body>
</html>
